(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{300:function(t,a,s){"use strict";s.r(a);var e=s(5),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#编译系统"}},[t._v("编译系统")]),s("ul",[s("li",[s("a",{attrs:{href:"#预处理（产生-i文件）"}},[t._v("预处理（产生.i文件）")])]),s("li",[s("a",{attrs:{href:"#编译（产生-s文件）"}},[t._v("编译（产生.s文件）")])]),s("li",[s("a",{attrs:{href:"#汇编（产生-o或-obj文件）"}},[t._v("汇编（产生.o或.obj文件）")])]),s("li",[s("a",{attrs:{href:"#链接（产生-out或-exe文件）"}},[t._v("链接（产生.out或.exe文件）")])])])]),s("li",[s("a",{attrs:{href:"#静态链接"}},[t._v("静态链接")])]),s("li",[s("a",{attrs:{href:"#目标文件"}},[t._v("目标文件")])]),s("li",[s("a",{attrs:{href:"#动态链接"}},[t._v("动态链接")])])])]),s("p"),t._v(" "),s("h2",{attrs:{id:"编译系统"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编译系统","aria-hidden":"true"}},[t._v("#")]),t._v(" 编译系统")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.ax1x.com/2019/10/31/KTYwAU.jpg",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"预处理（产生-i文件）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#预处理（产生-i文件）","aria-hidden":"true"}},[t._v("#")]),t._v(" 预处理（产生.i文件）")]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[t._v("g"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("E helloworld"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cpp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("o helloworld"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("i\n")])])]),s("ol",[s("li",[t._v("将"),s("code",[t._v("#define")]),t._v("删除，并将宏定义展开")]),t._v(" "),s("li",[t._v("处理一些条件预编译指令，如"),s("code",[t._v("#ifndef")]),t._v(","),s("code",[t._v("#ifdef")]),t._v(","),s("code",[t._v("#elif")]),t._v(","),s("code",[t._v("#else")]),t._v(","),s("code",[t._v("#endif")]),t._v("（作用：防止重复包含头文件）等。将不必要的代码过滤掉。")]),t._v(" "),s("li",[t._v("处理"),s("code",[t._v("#include")]),t._v("预编译指令，将被包含的文件插入到该预编译指令的位置。这个过程是递归进行的，因为被包含的文件也包含其他文件")]),t._v(" "),s("li",[t._v("过滤掉所有注释里面的内容")]),t._v(" "),s("li",[t._v("添加行号和文件名标识")]),t._v(" "),s("li",[t._v("保留"),s("code",[t._v("#program")]),t._v("编译器指令，因为编译器需要使用他们")])]),t._v(" "),s("h3",{attrs:{id:"编译（产生-s文件）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编译（产生-s文件）","aria-hidden":"true"}},[t._v("#")]),t._v(" 编译（产生.s文件）")]),t._v(" "),s("div",{staticClass:"language-cpp extra-class"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[t._v("g"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("S helloworld"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("o helloworld"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("s\n")])])]),s("p",[t._v("编译就是将预处理的文件进行一系列的词法分析、语法分析、语义分析，以及优化后产生相应的汇编代码文件。")]),t._v(" "),s("h3",{attrs:{id:"汇编（产生-o或-obj文件）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#汇编（产生-o或-obj文件）","aria-hidden":"true"}},[t._v("#")]),t._v(" 汇编（产生.o或.obj文件）")]),t._v(" "),s("p",[t._v("汇编过程实际上是把汇编语言代码翻译成目标机器指令的过程，即生成目标文件。目标文件中所存放的也就是与源程序等效的目标机器语言代码。目标文件由段组成，通常一个目标文件至少有两个段：")]),t._v(" "),s("ul",[s("li",[t._v("代码段：该段中所包含的主要是程序的指令，该段一般是可读和可执行的，但一般不可写。")]),t._v(" "),s("li",[t._v("数据段：主要存放程序中要用到的各种全局变量或静态的数据。一般数据段都是可读、可写、可执行的。")])]),t._v(" "),s("h3",{attrs:{id:"链接（产生-out或-exe文件）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#链接（产生-out或-exe文件）","aria-hidden":"true"}},[t._v("#")]),t._v(" 链接（产生.out或.exe文件）")]),t._v(" "),s("p",[t._v("链接就是把每个源代码独立的编译，然后按照它们的要求将它们组装起来，链接主要解决的是源代码之间的相互依赖问题，链接的过程包括地址和空间的分配，符号决议，和重定位等这些步骤。")]),t._v(" "),s("h2",{attrs:{id:"静态链接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#静态链接","aria-hidden":"true"}},[t._v("#")]),t._v(" 静态链接")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.ax1x.com/2019/10/31/KTY0NF.jpg",alt:""}})]),t._v(" "),s("p",[t._v("静态链接器以一组可重定位目标文件为输入，生成一个完全链接的可执行目标文件作为输出。链接器主要完成以下两个任务：")]),t._v(" "),s("ul",[s("li",[t._v("符号解析：每个符号对应于一个函数、一个全局变量或一个静态变量，符号解析的目的是将每个符号引用与一个符号定义关联起来。")]),t._v(" "),s("li",[t._v("重定位：链接器通过把每个符号定义与一个内存位置关联起来，然后修改所有对这些符号的引用，使得它们指向这个内存位置。")])]),t._v(" "),s("h2",{attrs:{id:"目标文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#目标文件","aria-hidden":"true"}},[t._v("#")]),t._v(" 目标文件")]),t._v(" "),s("p",[t._v("可执行目标文件：可以直接在内存中执行；")]),t._v(" "),s("p",[t._v("可重定位目标文件：可与其它可重定位目标文件在链接阶段合并，创建一个可执行目标文件；")]),t._v(" "),s("p",[t._v("共享目标文件：这是一种特殊的可重定位目标文件，可以在运行时被动态加载进内存并链接；")]),t._v(" "),s("h2",{attrs:{id:"动态链接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#动态链接","aria-hidden":"true"}},[t._v("#")]),t._v(" 动态链接")]),t._v(" "),s("p",[t._v("静态库有以下两个问题：")]),t._v(" "),s("ul",[s("li",[t._v("当静态库更新时那么整个程序都要重新进行链接；")]),t._v(" "),s("li",[t._v("对于 "),s("code",[t._v("printf")]),t._v(" 这种标准函数库，如果每个程序都要有代码，这会极大浪费资源。")])]),t._v(" "),s("p",[t._v("共享库是为了解决静态库的这两个问题而设计的，在 "),s("code",[t._v("Linux")]),t._v(" 系统中通常用 "),s("code",[t._v(".so")]),t._v(" 后缀来表示，"),s("code",[t._v("Windows")]),t._v(" 系统上它们被称为 "),s("code",[t._v("DLL")]),t._v("。它具有以下特点：")]),t._v(" "),s("ul",[s("li",[t._v("在给定的文件系统中一个库只有一个文件，所有引用该库的可执行目标文件都共享这个文件，它不会被复制到引用它的可执行文件中；")]),t._v(" "),s("li",[t._v("在内存中，一个共享库的 .text 节（已编译程序的机器代码）的一个副本可以被不同的正在运行的进程共享。")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.ax1x.com/2019/10/31/KTYnnP.jpg",alt:""}})])])}),[],!1,null,null,null);a.default=r.exports}}]);